{
    "$schema": "http://json-schema.org/schema#", 
    "$id": "v1",
    "title": "PR",
    "description": "A PR safe to merge",
    "type": "object",
    "properties": {
        "config": {
            "type": "array",
            "items": { "$ref": "#/definitions/rules" }
          }
        },
        "definitions": {
            "rules": {
                "type": "object",
                "required": [ "author", "title" ],
                "properties" : {
                    "author": {
                        "description": "The author of a PR",
                        "enum": ["googleapis-publisher","yoshi-automation","yoshi-code-bot"]
                      }
                    },
                    "allOf": [
                        {
                          "if": {
                            "properties": { "author": { "const": "googleapis-publisher" } }
                          },
                          "then": {
                            "properties": { "title": { "pattern": "^chore: autogenerated discovery document update" }
                                            
                          }
                        }
                    },
                        {
                          "if": {
                            "properties": { "country": { "const": "yoshi-automation" } }
                          },
                          "then": {
                            "properties": { "title": { "const": "chore: regenerate README" },
                            "changedFiles": {"type": "array",
                                "maxItems": 2,
                                "items": {"enum": ["README.md$","synth.metadata$"]}
                        }
                    }
                }
                        },
                        {
                          "if": {
                            "properties": { "country": { "const": "yoshi-code-bot" },
                            "changedFiles": {"pattern": "README.md$|synth.metadata$" } }
                          },
                          "then": {
                            "properties": { "title": { "pattern": "^chore: release" },
                            "changedFiles": {"type": "array",
                                "maxItems": 2,
                                "items": {"enum": ["package.json$","CHANGELOG.md$"]}
                            }
                        }
                    }
                        }
                      ]
    
            }
     
    }
  }